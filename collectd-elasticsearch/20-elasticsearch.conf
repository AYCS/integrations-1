# Install:
#   This is a Python-based plugin using third-party code by SignalFx. Clone the
#   plugin's repository and install its Python dependencies:
#     git clone \
#         https://github.com/signalfx/collectd-elasticsearch.git \
#         /usr/share/collectd/collectd-elasticsearch
#     service collectd restart

# Documentation:
#   https://github.com/signalfx/collectd-elasticsearch.git

# System modifications:
#   None

# Config file modifications:
#   - The defaults should work for a recent, standard Elasticsearch installation.
#   - Change Cluster to match the cluster name that is configured by Elasticsearch.
#   - Enable/disable cluster health stats. These are enabled by default.
#   - Enable/disable index stats. These are disabled by default. SignalFx recommends 
#      enabling index stats collection only on master-eligible Elasticsearch nodes. 
#   - Configuring per-index statistics:
#      To retrieve statistics for a specific index, you can set the Index configuration
#      option with the name of the index. For example Indexes ["index1"]. You can also
#      set it to multiple indexes in a comma separated format : Indexes ["index1", "index2"].
#      To retrieve statistics for all indexes, use the special "_all" index : Indexes ["_all"]
#      To disable index statistic collection set EnableIndexStats to false.
#   - Basic Authentication support:
#      If your Elasticsearch installation has basic authentication set up, then you may specify
#      a username and password in this file by setting the properties "Username" and "Password"
#      with the corresponding values.

<LoadPlugin "python">
    Globals true
</LoadPlugin>

<Plugin "python">
    ModulePath "/usr/share/collectd/python/"

    Import "elasticsearch_collectd"

    <Module "elasticsearch_collectd">
        Verbose false
        Cluster "elasticsearch"
        Indexes ["_all"]
        EnableIndexStats false
        EnableClusterHealth true
        Interval 10
    </Module>
</Plugin>
